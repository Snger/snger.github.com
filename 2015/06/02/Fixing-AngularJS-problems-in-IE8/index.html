
<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
  <title>处理 Angularjs 兼容 IE8 问题 | The Same Summer.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="author" content="Snger">
  
  <meta name="description" content="本文记录了使用 angularjs 并兼容 IE8 相关内容">
  
  <meta name="keywords" content="angularjs">
  <meta property="og:title" content="处理 Angularjs 兼容 IE8 问题"/>
  <meta property="og:site_name" content="The Same Summer."/>
  <link href="/favicon.ico" rel="icon" type="image/x-ico">
  <link rel="alternate" href="/atom.xml" title="The Same Summer." type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.min.css" type="text/css">
</head>

<body>
  <header>
    <div class="clearfix">
	<div id="logo">
		<a href="/"><img src="/img/logo.svg" width="360" height="108" alt="Snger"/></a>
		<hgroup>
			<h1 class="site-name"><a href="/">The Same Summer.</a></h1>
			<h2 class="blog-motto"></h2>
		</hgroup>
	 </div>
	 <div class="navbar"><a class="navbutton" href="#"><i class="icon-menu"></i></a></div>
	<nav>
		<ul>
		 
			<li><a href="/">博客</a></li>
		
			<li><a href="/archives">存档</a></li>
		
			<li><a href="/about">关于</a></li>
		
			<li><a href="/projects">专题</a></li>
		
			<li><a href="/lab">实验室</a></li>
		
			<li> <a title="shall we talk" href='javascript:(
function() {
	function loadCss() {
		var e = document.createElement("link");
		e.setAttribute("type", "text/css");
		e.setAttribute("rel", "stylesheet");
		e.setAttribute("href", f);
		e.setAttribute("class", l);
		document.body.appendChild(e)
	}
 
	function removeCssClass() {
		var e = document.getElementsByClassName(l);
		for (var t = 0; t < e.length; t++) {
			document.body.removeChild(e[t])
		}
	}
 
	function showLight() {
		var e = document.createElement("div");
		e.setAttribute("class", a);
		document.body.appendChild(e);
		setTimeout(function() {
			document.body.removeChild(e)
		}, 100)
	}
 
	function getOffset(e) {
		return {
			height : e.offsetHeight,
			width : e.offsetWidth
		}
	}
 
	function elemFilter(i) {
		var s = getOffset(i);
		return s.height > e && s.height < n && s.width > t && s.width < r
	}
 
	function returnOffsetTop(e) {
		var t = e;
		var n = 0;
		while (!!t) {
			n += t.offsetTop;
			t = t.offsetParent
		}
		return n
	}
 
	function g() {
		var e = document.documentElement;
		if (!!window.innerWidth) {
			return window.innerHeight
		} else if (e && !isNaN(e.clientHeight)) {
			return e.clientHeight
		}
		return 0
	}
 
	function y() {
		if (window.pageYOffset) {
			return window.pageYOffset
		}
		return Math.max(document.documentElement.scrollTop, document.body.scrollTop)
	}
 
	function E(e) {
		var t = returnOffsetTop(e);
		return t >= w && t <= b + w
	}
 
	function S() {
		var e = document.createElement("audio");
		e.setAttribute("class", l);
		e.src = i[parseInt(10*Math.random())];
		e.loop = false;
		e.addEventListener("canplay", function() {
			setTimeout(function() {
				x(k)
			}, 500);
			setTimeout(function() {
				N();
				showLight();
				for (var e = 0; e < O.length; e++) {
					T(O[e])
				}
			}, 15500)
		}, true);
		e.addEventListener("ended", function() {
			N();
			removeCssClass()
		}, true);
		e.innerHTML = " <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>";
		document.body.appendChild(e);
		e.play()
	}
 
	function x(e) {
		e.className += " " + s + " " + o
	}
 
	function T(e) {
		e.className += " " + s + " " + u[Math.floor(Math.random() * u.length)]
	}
 
	function N() {
		var e = document.getElementsByClassName(s);
		var t = new RegExp("\\b" + s + "\\b");
		for (var n = 0; n < e.length; ) {
			e[n].className = e[n].className.replace(t, "")
		}
	}

	function reset(){
		N();removeCssClass();
	}
 
	var e = 30;
	var t = 30;
	var n = 350;
	var r = 350;
	var i = ["/music/again-yui.mp3","/music/AiCongLingKaiShi-syz.mp3","/music/BieLaiWuYang-xtf.mp3","/music/DangChe-eason.mp3","/music/HaoJiuBuJian-eason.mp3","/music/LifeForRent-Dido.mp3","/music/TongLei-syz.mp3","/music/WoHuaiNianDe-syz.mp3","/music/youAreBeautiful.mp3","/music/youngForYou.mp3"];
	var s = "mw-harlem_shake_me";
	var o = "im_first";
	var u = ["im_drunk", "im_baked", "im_trippin", "im_blown"];
	var a = "mw-strobe_light";
	var f = "/css/harlem-shake-style.min.css";
	var l = "mw_added_css";
	var b = g();
	var w = y();
	var C = document.getElementsByTagName("*");
	var k = null;
	reset();
	for (var L = 0; L < C.length; L++) {
		var A = C[L];
		if (elemFilter(A)) {
			if (E(A)) {
				k = A;
				break
			}
		}
	}
	if (A === null) {
		console.warn("Could not find a node of the right size. Please try a different page.");
		return
	}
	loadCss();
	S();
	var O = [];
	for (var L = 0; L < C.length; L++) {
		var A = C[L];
		if (elemFilter(A)) {
			O.push(A)
		}
	}
})()    '>>_<</a>
			</li>
			<li><form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
				<label>Search</label>
					<input type="search" name="q" id="search" autocomplete="off" autocorrect="off" autocapitalize="off" maxlength="20" placeholder="Search" />
					<input type="hidden" name="q" value="site:snger.github.io">
				</form>
			</li>
		</ul>
	</nav>
</div>
<!-- var i = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3";
	var f = "//s3.amazonaws.com/source/css/harlem-shake-style.css"; -->
  </header>
  <div id="container">
    <div id="main" class="postpart">
	<header class="clearfix">
	  <h1><a href="/2015/06/02/Fixing-AngularJS-problems-in-IE8/" title="处理 Angularjs 兼容 IE8 问题">处理 Angularjs 兼容 IE8 问题</a></h1>
	  <p>By
	  
	 	 <a href="https://twitter.com/sjs_stef" title="Snger">Snger</a>
	  
	  on<time datetime="2015-06-02T06:58:22.000Z">Jun 2 2015</time></p>
	</header>
	<article>     
	     <h2 id="项目背景">项目背景</h2><p>项目最早使用的是 angularjs 1.3.x 版本，功能开发完成后，发现使用者中 IE8 用户占比为 ，而且因为项目特质，必须解决用户的 IE8 使用场景，于是乎，有了此文。</p>
<h2 id="目标">目标</h2><p>使用 angularjs 并兼容 IE8 （注：本文不考虑兼容低于 IE8 浏览器的情况）</p>
<h2 id="AngularJS兼容低版本IE文档">AngularJS兼容低版本IE文档</h2><p><a href="https://docs.angularjs.org/guide/ie" target="_blank" rel="external">docs.angularjs.org:Internet Explorer Compatibility</a>:</p>
<blockquote>
<p>Note: AngularJS 1.3 has dropped support for IE* Read more about it on our blog. AngularJS 1.2 will continue to support IE8, but the core team does not plan to spend time addressing issues specific to IE8 or earlier.</p>
</blockquote>
<p>AngularJS 1.3抛弃了对 IE8 的支持，但 AngularJS 1.2 将继续支持 IE8，但核心团队已经不打算在解决 IE8 及之前版本的问题上花时间。本文档介绍了互联网浏览器（IE）在处理自定义 HTML 标签及属性时的特点。如果你正计划在 IE8 或更早的浏览器上部署 Angular 应用请阅读本文。<br>项目目前支持且将尝试修复 IE9 以上的 bug。持续集成服务器在 IE9，IE10 和 IE11 上运行所有的测试。详细内容参加 Travis CI 及 <a href="ci.angularjs.org">ci.angularjs.org</a>。<br>我们不在 IE8 及之前的浏览器上运行测试。一些 AngularJS 的功能子集也许能够在在这些浏览器上工作，但这将由你来测试并决定它在你的特定应用上是否工作。</p>
<p>……</p>
<h2 id="总结">总结</h2><h3 id="全局">全局</h3><ul>
<li>angular 版本降级：1.3.x -〉 1.2.x；</li>
<li>引入 <a href="https://github.com/es-shims/es5-shim" target="_blank" rel="external">es5-shim</a>；</li>
</ul>
<blockquote>
<p>es5-shim可以让一些低级的浏览器支持最新的ecmascript5的一些特性。</p>
</blockquote>
<h3 id="项目">项目</h3><ul>
<li>angularjs 打包(<code>$templateCache</code>)；</li>
</ul>
<blockquote>
<p><a href="https://www.npmjs.com/package/grunt-angular-templates" target="_blank" rel="external">grunt-angular-templates</a><br>Speed up your AngularJS app by automatically minifying, combining, and automatically caching your HTML templates with <code>$templateCache</code>.</p>
</blockquote>
<ul>
<li>不要使用自定义元素标签，比如 &lt;ng:view&gt;，使用 &lt;div ng-view&gt;来取代。</li>
</ul>
<h3 id="Angularjs语法">Angularjs语法</h3><ul>
<li>给根元素添加 <code>id=”ng-app”</code> 属性与 <code>ng-app</code> 属性结合起来。</li>
</ul>
<pre>
<code>&lt;!doctype html>
&lt;html xmlns:ng="http://angularjs.org" id="ng-app" ng-app="optionalModuleName">
  ...
&lt;/html>
</code></pre>

<ul>
<li>使用 <code>ng-style</code> 标签来取代 <code>style=””</code></li>
<li>angular 1.2 $route 没有 <code>updateParams</code> 方法，使用 <code>$location.search</code>;(翻页组件)</li>
</ul>
<h3 id="浏览器语法">浏览器语法</h3><ul>
<li>删除代码中 Javascript 保留字列表，例如：delete；</li>
</ul>
<blockquote>
<p>Javascript保留字列表：<br>break delete function return typeof case do if switch var catch else in this void continue false instanceof throw while debugger finally new true with default for null try Javascript未来保留字(Javascript Future Reserved Words)<br>Javascript还有一些未来保留字，这些字虽然现在没有用到Javascript语言中，但是将来有可能用到。<br>Javascript未来保留字列表：<br>abstract double goto native static boolean enum implements package super byte export import private synchronized char extends int protected throws class final interface public transient const float long short volatile</p>
</blockquote>
<ul>
<li>删除 IE8 不支持的测试代码，例如 <code>console.log</code> ；</li>
<li>处理 <code>placeholder</code>；</li>
<li>删除 对象字面量中 最后一个属性后面的不 <code>,</code>；</li>
<li>对于数组不能使用 <code>for..in</code> 在 IE8 下会有问题, <a href="http://stackoverflow.com/questions/9085018/ie8-for-in-enumerator" target="_blank" rel="external">ie8-for-in-enumerator</a> ；</li>
</ul>
<h3 id="组件兼容性">组件兼容性</h3><ul>
<li>时间选择控件有问题；</li>
<li>单选框、复选框 选中图片没变化，貌似使用 ng-checked 才可以；</li>
<li>excel 导入 upload 组件有问题；<br>  a. 上传请求后端返回 content-type 需要改成  Content-Type:text/html; charset=UTF-8</li>
<li>input[number] max 不支持表达式（模板中好像连数值10也不支持），重新写指令；</li>
<li>部分用户反馈 改最终价不生效，后面发现是因为 不响应 ng-keyup 事件，换成 ng-change；</li>
</ul>
<h3 id="低级错误">低级错误</h3><ul>
<li><code>form</code> 错写成 <code>from</code> 造成元素上的控制器无效；</li>
</ul>
<h3 id="针对_IE8_优化">针对 IE8 优化</h3><ul>
<li>判断 ie8 则限制默认列表数量；</li>
<li>infiniteScroll 优化加载速度；</li>
</ul>
    
	</article>
	


<div class="articletags">
	<i class="icon-tag"></i>Tags: <a href="/tags/Web前端/">Web前端</a>
	<i class="icon-folder"></i>categories:  <a href="/categories/Web前端/">Web前端</a>
</div>

	
<div class="jiathis_style share">
    <span class="jiathis_txt">分享到：</span>
    <a class="jiathis_button_tsina">新浪微博</a>
    <a class="jiathis_button_tqq">腾讯微博</a>
    <a class="jiathis_button_weixin">微信</a>
    <a class="jiathis_button_twitter">Twitter</a>
    <a class="jiathis_button_googleplus">Google+</a>
    <a class="jiathis_button_evernote">EverNote</a>
    <a href="http://www.jiathis.com/share?uid=1501277" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
</div>
<script type="text/javascript" >
    var jiathis_config={
    data_track_clickback:true,
    sm:"copy,renren,cqq",
    pic:"",
    summary:"",
     ralateuid:{"tsina":"1530558400"},hideMore:false}
    
  </script> 
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=
" charset="utf-8"></script>      

	<div class="pagepart clearfix">
 
 
	<a href="/2014/02/27/use-vimdiff/" class="next" title="查看代码变更（或审查代码）的建议">查看代码变更（或审查代码）的建议</a>
 
</div>
	
<section id="comments">
  <h1 class="title">交流区</h1>
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
    <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏">
        <i class="icon-menu"></i>
      </a></div>
    <div id="asidepart">
    <div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"><i class="icon-menu"></i></a></div>
    <aside>
  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>2</sup></a></li>
		
			<li><a href="/categories/Web前端/" title="Web前端">Web前端<sup>11</sup></a></li>
		
			<li><a href="/categories/php/" title="php">php<sup>1</sup></a></li>
		
			<li><a href="/categories/博客相关/" title="博客相关">博客相关<sup>6</sup></a></li>
		
			<li><a href="/categories/工具/" title="工具">工具<sup>4</sup></a></li>
		
			<li><a href="/categories/折腾/" title="折腾">折腾<sup>1</sup></a></li>
		
			<li><a href="/categories/读书笔记/" title="读书笔记">读书笔记<sup>2</sup></a></li>
		
			<li><a href="/categories/达者为师/" title="达者为师">达者为师<sup>2</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/Linux/" title="Linux">Linux<sup>2</sup></a></li>
		
			<li><a href="/tags/Magento/" title="Magento">Magento<sup>1</sup></a></li>
		
			<li><a href="/tags/Octopress/" title="Octopress">Octopress<sup>5</sup></a></li>
		
			<li><a href="/tags/Web前端/" title="Web前端">Web前端<sup>11</sup></a></li>
		
			<li><a href="/tags/git/" title="git">git<sup>1</sup></a></li>
		
			<li><a href="/tags/hexo/" title="hexo">hexo<sup>1</sup></a></li>
		
			<li><a href="/tags/mp3tag/" title="mp3tag">mp3tag<sup>1</sup></a></li>
		
			<li><a href="/tags/php/" title="php">php<sup>1</sup></a></li>
		
			<li><a href="/tags/vim/" title="vim">vim<sup>2</sup></a></li>
		
			<li><a href="/tags/vimdiff/" title="vimdiff">vimdiff<sup>1</sup></a></li>
		
			<li><a href="/tags/工具/" title="工具">工具<sup>2</sup></a></li>
		
			<li><a href="/tags/折腾/" title="折腾">折腾<sup>5</sup></a></li>
		
			<li><a href="/tags/翻译/" title="翻译">翻译<sup>1</sup></a></li>
		
			<li><a href="/tags/读书笔记/" title="读书笔记">读书笔记<sup>7</sup></a></li>
		
			<li><a href="/tags/达者为师/" title="达者为师">达者为师<sup>5</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="RSS 订阅"><i class="icon-rss"></i>RSS 订阅</a>
</div>
</aside>
    </div>
  </div>
  <footer><div id="footer" >
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	<section class="info">
		<p>在开源的世界学习了很多 <br/>
		从具有开源精神的人身上学到更多……<br/>
		</p>
	</section>
	<div class="social-font">
		
		<a href="http://weibo.com/snger" target="_blank" title="新浪微博"><i class="icon-sina-weibo"></i></a>
		
		
		<a href="https://twitter.com/sjs_stef" target="_blank" title="twitter"><i class="icon-twitter"></i></a>
		
		
		<a href="https://github.com/snger" target="_blank" title="github"><i class="icon-github"></i></a>
		
		
	</div>
	<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme forked from <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2015 
	
	<a href="http://snger.github.io" title="Snger">Snger</a>
	
	</p>
</div>
</footer>
  <script src="/js/jquery-2.0.1.min.js"></script>
<script src="/js/prettify.js"></script>
	<script type="text/javascript">
	$(document).ready(function()         
	{	
		$('.navbar').click(function(){
			$('header nav').slideToggle("slow");
		});
		var myWidth = 0;
    	function getSize(){
    		if( typeof( window.innerWidth ) == 'number' ) {
    			myWidth = window.innerWidth;
           	 } else if( document.documentElement && document.documentElement.clientWidth) {
             	myWidth = document.documentElement.clientWidth;
            };
        };
    	getSize(); 
    	//document.getElementById("test").innerHTML =myWidth;
        $(window).resize(function(){
        	getSize(); 
        	if (myWidth >= 1024||(document.activeElement.id=='search')) {
        		$('nav').css('display', 'block') ;
			}else{
				$('nav').css('display', 'none') ;
			}
        });
     $("pre").addClass("prettyprint linenums");
     prettyPrint();
     $('.closeaside').click(function(){
            $('#asidepart').fadeOut();
            $('#main').animate({
                marginLeft: ['10%','swing'],
                marginRight: ['10%','swing']
            });
            $('.openaside').fadeIn();  
        });
        $('.openaside').click(function(){
            $('#asidepart').fadeIn();
            $('#main').animate({
                marginLeft: ['0%','swing'],
                marginRight: ['0%','swing']
            });
            $('.openaside').fadeOut();  
        });
        $(window).scroll(function(){
            $('.openaside').css("top",Math.max(50,260-$(this).scrollTop()));
        });
	});
</script>

<script>
  var disqus_shortname = 'snger';
  
  var disqus_url = 'http://snger.github.io/2015/06/02/Fixing-AngularJS-problems-in-IE8/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27385230-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</body>
</html> 
